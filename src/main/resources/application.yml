server:
  port: 8080

spring:
  application:
    name: IntelliVault-Backend

  # [新增] 文件上传配置
  servlet:
    multipart:
      max-file-size: 100MB    # 单个文件最大大小
      max-request-size: 100MB # 整个请求最大大小

  data:
    mongodb:
      uri: mongodb://localhost:27017/intellivault
      auto-index-creation: true

  ai:
    # 1. Chat 部分 (DeepSeek)
    openai:
      api-key: ${DEEPSEEK_API_KEY}
      base-url: https://api.deepseek.com
      chat:
        options:
          model: deepseek-chat
      # 显式禁用 OpenAI 的 embedding，防止干扰
      embedding:
        enabled: false

    # 2. Embedding 部分 (本地 Transformers)
    # [关键修正] 注意这里的层级：先 embedding，后 transformer
    embedding:
      transformer:
        # 指定使用 transformers 实现 (Spring AI 1.0 M4+ 新标准)
        enabled: true
        tokenizer:
          uri: classpath:/onnx/all-MiniLM-L6-v2/tokenizer.json
        onnx:
          model-uri: classpath:/onnx/all-MiniLM-L6-v2/model.onnx